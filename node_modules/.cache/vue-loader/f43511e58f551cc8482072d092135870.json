{"remainingRequest":"/Users/heyuanpeng/个人项目/vueTool/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/heyuanpeng/个人项目/vueTool/src/views/Attempt/SummaryHtml/components/download.vue?vue&type=style&index=0&id=6f4c2f97&scoped=true&lang=css&","dependencies":[{"path":"/Users/heyuanpeng/个人项目/vueTool/src/views/Attempt/SummaryHtml/components/download.vue","mtime":1576495312043},{"path":"/Users/heyuanpeng/个人项目/vueTool/node_modules/css-loader/index.js","mtime":1567574744060},{"path":"/Users/heyuanpeng/个人项目/vueTool/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1565602921100},{"path":"/Users/heyuanpeng/个人项目/vueTool/node_modules/postcss-loader/src/index.js","mtime":1565602920420},{"path":"/Users/heyuanpeng/个人项目/vueTool/node_modules/cache-loader/dist/cjs.js","mtime":1567574739571},{"path":"/Users/heyuanpeng/个人项目/vueTool/node_modules/vue-loader/lib/index.js","mtime":1565602921100}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.pdf-container {\n  width: 750px;\n}\n.canvas-container {\n  border: 1px dashed black;\n  position: relative;\n}\n",{"version":3,"sources":["download.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;AACA;AACA;AACA;AACA;AACA","file":"download.vue","sourceRoot":"src/views/Attempt/SummaryHtml/components","sourcesContent":["<template>\n  <div>\n    <input type=\"file\" ref=\"fielinput\" @change=\"uploadFile\" />\n    <div class=\"canvas-container\">\n      <canvas ref=\"myCanvas\" class=\"pdf-container\"> </canvas>\n    </div>\n  </div>\n</template>\n\n<script>\nimport pdfJS from \"pdfjs-dist\";\nexport default {\n  mounted() {},\n  data() {\n    return {\n      pdfData: \"\", // PDF的base64\n      scale: 1 // 缩放值\n    };\n  },\n  methods: {\n    uploadFile() {\n      let inputDom = this.$refs.fielinput;\n      let file = inputDom.files[0];\n      let reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        this.pdfData = atob(\n          reader.result.substring(reader.result.indexOf(\",\") + 1)\n        );\n        this.previewPDF();\n      };\n    },\n    previewPDF() {\n      // 引入pdf.js的字体\n      let CMAP_URL = \"https://unpkg.com/pdfjs-dist@2.0.943/cmaps/\";\n      // 读取base64的pdf流文件\n      let loadingTask = pdfJS.getDocument({\n        data: this.pdfData, // PDF base64编码\n        cMapUrl: CMAP_URL,\n        cMapPacked: true\n      });\n      loadingTask.promise.then(pdf => {\n        this.loadFinished = true;\n        let numPages = pdf.numPages;\n        let pageNumber = 1;\n        this.getPage(pdf, pageNumber, numPages);\n      });\n    },\n    getPage(pdf, pageNumber, numPages) {\n      let _this = this;\n      pdf.getPage(pageNumber).then(page => {\n        // 获取DOM中为预览PDF准备好的canvasDOM对象\n        let canvas = this.$refs.myCanvas;\n        let viewport = page.getViewport(_this.scale);\n        canvas.height = viewport.height;\n        canvas.width = viewport.width;\n        let ctx = canvas.getContext(\"2d\");\n        let renderContext = {\n          canvasContext: ctx,\n          viewport: viewport\n        };\n        page.render(renderContext).then(() => {\n          pageNumber += 1;\n          if (pageNumber <= numPages) {\n            _this.getPage(pdf, pageNumber, numPages);\n          }\n        });\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.pdf-container {\n  width: 750px;\n}\n.canvas-container {\n  border: 1px dashed black;\n  position: relative;\n}\n</style>\n"]}]}