{"remainingRequest":"/Users/heyuanpeng/个人项目/ArtisticCreation/artistic-creation/node_modules/babel-loader/lib/index.js!/Users/heyuanpeng/个人项目/ArtisticCreation/artistic-creation/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/heyuanpeng/个人项目/ArtisticCreation/artistic-creation/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/heyuanpeng/个人项目/ArtisticCreation/artistic-creation/src/views/Attempt/SummaryHtml/components/download.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/heyuanpeng/个人项目/ArtisticCreation/artistic-creation/src/views/Attempt/SummaryHtml/components/download.vue","mtime":1576495312043},{"path":"/Users/heyuanpeng/个人项目/ArtisticCreation/artistic-creation/node_modules/cache-loader/dist/cjs.js","mtime":1567574739571},{"path":"/Users/heyuanpeng/个人项目/ArtisticCreation/artistic-creation/node_modules/babel-loader/lib/index.js","mtime":1565602919806},{"path":"/Users/heyuanpeng/个人项目/ArtisticCreation/artistic-creation/node_modules/cache-loader/dist/cjs.js","mtime":1567574739571},{"path":"/Users/heyuanpeng/个人项目/ArtisticCreation/artistic-creation/node_modules/vue-loader/lib/index.js","mtime":1565602921100}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\nimport pdfJS from \"pdfjs-dist\";\nexport default {\n  mounted: function mounted() {},\n  data: function data() {\n    return {\n      pdfData: \"\",\n      // PDF的base64\n      scale: 1 // 缩放值\n\n    };\n  },\n  methods: {\n    uploadFile: function uploadFile() {\n      var _this2 = this;\n\n      var inputDom = this.$refs.fielinput;\n      var file = inputDom.files[0];\n      var reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onload = function () {\n        _this2.pdfData = atob(reader.result.substring(reader.result.indexOf(\",\") + 1));\n\n        _this2.previewPDF();\n      };\n    },\n    previewPDF: function previewPDF() {\n      var _this3 = this;\n\n      // 引入pdf.js的字体\n      var CMAP_URL = \"https://unpkg.com/pdfjs-dist@2.0.943/cmaps/\"; // 读取base64的pdf流文件\n\n      var loadingTask = pdfJS.getDocument({\n        data: this.pdfData,\n        // PDF base64编码\n        cMapUrl: CMAP_URL,\n        cMapPacked: true\n      });\n      loadingTask.promise.then(function (pdf) {\n        _this3.loadFinished = true;\n        var numPages = pdf.numPages;\n        var pageNumber = 1;\n\n        _this3.getPage(pdf, pageNumber, numPages);\n      });\n    },\n    getPage: function getPage(pdf, pageNumber, numPages) {\n      var _this4 = this;\n\n      var _this = this;\n\n      pdf.getPage(pageNumber).then(function (page) {\n        // 获取DOM中为预览PDF准备好的canvasDOM对象\n        var canvas = _this4.$refs.myCanvas;\n        var viewport = page.getViewport(_this.scale);\n        canvas.height = viewport.height;\n        canvas.width = viewport.width;\n        var ctx = canvas.getContext(\"2d\");\n        var renderContext = {\n          canvasContext: ctx,\n          viewport: viewport\n        };\n        page.render(renderContext).then(function () {\n          pageNumber += 1;\n\n          if (pageNumber <= numPages) {\n            _this.getPage(pdf, pageNumber, numPages);\n          }\n        });\n      });\n    }\n  }\n};",{"version":3,"sources":["download.vue"],"names":[],"mappings":";;;;;;;;;AAUA,OAAA,KAAA,MAAA,YAAA;AACA,eAAA;AACA,EAAA,OADA,qBACA,CAAA,CADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AACA;AACA,MAAA,KAAA,EAAA,CAFA,CAEA;;AAFA,KAAA;AAIA,GAPA;AAQA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AAAA;;AACA,UAAA,QAAA,GAAA,KAAA,KAAA,CAAA,SAAA;AACA,UAAA,IAAA,GAAA,QAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,UAAA,MAAA,GAAA,IAAA,UAAA,EAAA;AACA,MAAA,MAAA,CAAA,aAAA,CAAA,IAAA;;AACA,MAAA,MAAA,CAAA,MAAA,GAAA,YAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,IAAA,CACA,MAAA,CAAA,MAAA,CAAA,SAAA,CAAA,MAAA,CAAA,MAAA,CAAA,OAAA,CAAA,GAAA,IAAA,CAAA,CADA,CAAA;;AAGA,QAAA,MAAA,CAAA,UAAA;AACA,OALA;AAMA,KAZA;AAaA,IAAA,UAbA,wBAaA;AAAA;;AACA;AACA,UAAA,QAAA,GAAA,6CAAA,CAFA,CAGA;;AACA,UAAA,WAAA,GAAA,KAAA,CAAA,WAAA,CAAA;AACA,QAAA,IAAA,EAAA,KAAA,OADA;AACA;AACA,QAAA,OAAA,EAAA,QAFA;AAGA,QAAA,UAAA,EAAA;AAHA,OAAA,CAAA;AAKA,MAAA,WAAA,CAAA,OAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,YAAA,GAAA,IAAA;AACA,YAAA,QAAA,GAAA,GAAA,CAAA,QAAA;AACA,YAAA,UAAA,GAAA,CAAA;;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,GAAA,EAAA,UAAA,EAAA,QAAA;AACA,OALA;AAMA,KA5BA;AA6BA,IAAA,OA7BA,mBA6BA,GA7BA,EA6BA,UA7BA,EA6BA,QA7BA,EA6BA;AAAA;;AACA,UAAA,KAAA,GAAA,IAAA;;AACA,MAAA,GAAA,CAAA,OAAA,CAAA,UAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA;AACA,YAAA,MAAA,GAAA,MAAA,CAAA,KAAA,CAAA,QAAA;AACA,YAAA,QAAA,GAAA,IAAA,CAAA,WAAA,CAAA,KAAA,CAAA,KAAA,CAAA;AACA,QAAA,MAAA,CAAA,MAAA,GAAA,QAAA,CAAA,MAAA;AACA,QAAA,MAAA,CAAA,KAAA,GAAA,QAAA,CAAA,KAAA;AACA,YAAA,GAAA,GAAA,MAAA,CAAA,UAAA,CAAA,IAAA,CAAA;AACA,YAAA,aAAA,GAAA;AACA,UAAA,aAAA,EAAA,GADA;AAEA,UAAA,QAAA,EAAA;AAFA,SAAA;AAIA,QAAA,IAAA,CAAA,MAAA,CAAA,aAAA,EAAA,IAAA,CAAA,YAAA;AACA,UAAA,UAAA,IAAA,CAAA;;AACA,cAAA,UAAA,IAAA,QAAA,EAAA;AACA,YAAA,KAAA,CAAA,OAAA,CAAA,GAAA,EAAA,UAAA,EAAA,QAAA;AACA;AACA,SALA;AAMA,OAjBA;AAkBA;AAjDA;AARA,CAAA","sourcesContent":["<template>\n  <div>\n    <input type=\"file\" ref=\"fielinput\" @change=\"uploadFile\" />\n    <div class=\"canvas-container\">\n      <canvas ref=\"myCanvas\" class=\"pdf-container\"> </canvas>\n    </div>\n  </div>\n</template>\n\n<script>\nimport pdfJS from \"pdfjs-dist\";\nexport default {\n  mounted() {},\n  data() {\n    return {\n      pdfData: \"\", // PDF的base64\n      scale: 1 // 缩放值\n    };\n  },\n  methods: {\n    uploadFile() {\n      let inputDom = this.$refs.fielinput;\n      let file = inputDom.files[0];\n      let reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        this.pdfData = atob(\n          reader.result.substring(reader.result.indexOf(\",\") + 1)\n        );\n        this.previewPDF();\n      };\n    },\n    previewPDF() {\n      // 引入pdf.js的字体\n      let CMAP_URL = \"https://unpkg.com/pdfjs-dist@2.0.943/cmaps/\";\n      // 读取base64的pdf流文件\n      let loadingTask = pdfJS.getDocument({\n        data: this.pdfData, // PDF base64编码\n        cMapUrl: CMAP_URL,\n        cMapPacked: true\n      });\n      loadingTask.promise.then(pdf => {\n        this.loadFinished = true;\n        let numPages = pdf.numPages;\n        let pageNumber = 1;\n        this.getPage(pdf, pageNumber, numPages);\n      });\n    },\n    getPage(pdf, pageNumber, numPages) {\n      let _this = this;\n      pdf.getPage(pageNumber).then(page => {\n        // 获取DOM中为预览PDF准备好的canvasDOM对象\n        let canvas = this.$refs.myCanvas;\n        let viewport = page.getViewport(_this.scale);\n        canvas.height = viewport.height;\n        canvas.width = viewport.width;\n        let ctx = canvas.getContext(\"2d\");\n        let renderContext = {\n          canvasContext: ctx,\n          viewport: viewport\n        };\n        page.render(renderContext).then(() => {\n          pageNumber += 1;\n          if (pageNumber <= numPages) {\n            _this.getPage(pdf, pageNumber, numPages);\n          }\n        });\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.pdf-container {\n  width: 750px;\n}\n.canvas-container {\n  border: 1px dashed black;\n  position: relative;\n}\n</style>\n"],"sourceRoot":"src/views/Attempt/SummaryHtml/components"}]}